import random
from timeit import default_timer as timer

def partition(A, p, r):  # í€µ ì •ë ¬ì˜ Partition
    x = A[p]
    left = p + 1  # i index
    right = r  # j index
    while True:
        while left <= right and A[left] <= x:
            left += 1
        while left <= right and x <= A[right]:
            right -= 1
        if right < left:  # i, j êµì°¨ ë˜ì—ˆì„ ë•Œ
            break
        else: # i, j êµì°¨ ë˜ì§€ ì•Šì•˜ì„ ë•Œ
            A[left], A[right] = A[right], A[left]
    A[p], A[right] = A[right], A[p]
    return right

def SELECT(A,p,r,i):  # pë¶€í„° rê¹Œì§€ ë²”ìœ„, ië²ˆì§¸ ì‘ì€ ì›ì†Œ ì°¾ê¸°
    if p == r:  # ë°ì´í„° í•˜ë‚˜
        return A[p]
    q = partition(A,p,r)  # q: ê¸°ì¤€ ê°’ì˜ ìœ„ì¹˜(ì¸ë±ìŠ¤)
    k= q - p + 1  # ê¸°ì¤€ ê°’ì´ kë²ˆì§¸ ì‘ì€ ì›ì†Œì„
    if i < k:
        return SELECT(A,p,q-1,i)
    elif i == k:
        return A[q]
    else:
        return SELECT(A,q+1,r,i-k)  # ì˜¤ë¥¸ìª½ì—ì„œ (i-k)ë²ˆ ì§¸ ì›ì†Œ ì°¾ê¸°

x = random.sample(range(10000), 100)
start = timer()
print(SELECT(x,0,99,50))  # 0~99 ì¤‘, 50ë²ˆ ì§¸ ì›ì†Œ ì°¾ê¸°
print(timer() - start)
print(x)
"""
* ì„ íƒ ì•Œê³ ë¦¬ì¦˜
- nê°œ ì¤‘ ië²ˆì§¸ ì‘ì€ ì›ì†Œ ì°¾ê¸°
- í•œë²ˆ ì”©ì€ ë´ì•¼ í•˜ë¯€ë¡œ Î©(n)
- O(nlogn)ì¸ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©  -> O(nlogn)
- Î©(n)ê³¼ O(nlogn) ì‚¬ì´ì¼ ê²ƒìœ¼ë¡œ ì¶”ì •

p: ì‹œì‘ ì¸ë±ìŠ¤, q: ê¸°ì¤€ ì¸ë±ìŠ¤
q-pê°œ / k=q-p+1 ë²ˆì§¸ / k+1ë²ˆì§¸ -> ì˜¤ë¥¸ìª½ êµ¬ì—­ 1ë²ˆì§¸
                   / k+më²ˆì§¸ -> ì˜¤ë¥¸ìª½ êµ¬ì•½ më²ˆì§¸
                   / k+(i-k)ë²ˆì§¸ -> ì˜¤ë¥¸ìª½ êµ¬ì—­ (i-k)ë²ˆì§¸

* ì„ íƒ ì•Œê³ ë¦¬ì¦˜ ì‹œê°„ ë³µì¡ë„
- ğ‘‡(ğ‘›) â‰¤ ğ‘šğ‘ğ‘¥(ğ‘‡(ğ‘˜âˆ’1), ğ‘‡(ğ‘›âˆ’ğ‘˜)) + Î˜(ğ‘›)
                 k ê¸°ì¤€       Partition
- í‰ê· 
-> ğ‘‡(ğ‘›) â‰¤ (1/n) * (k=1~n)âˆ‘ğ‘šğ‘ğ‘¥(ğ‘‡(ğ‘˜âˆ’1), ğ‘‡(ğ‘›âˆ’ğ‘˜)) +Î˜(ğ‘›) 
        â‰¤ (2/n) * (k=([n/2]~(n-1))âˆ‘ğ‘‡(ğ‘˜) + Î˜(ğ‘›)
-> k < nì¸ ëª¨ë“  kì— ëŒ€í•´ T(k) <= ck ë¼ê³  ê°€ì •
-> ğ‘‡(ğ‘›) â‰¤ (2/n) * (k=([n/2]~(n-1))âˆ‘ck + Î˜(ğ‘›)
       â‰¤ (2/n) * {(k=1~(n-1))âˆ‘ck - (k=(1~([n/2]-1))âˆ‘ck} + Î˜(ğ‘›)
       â‰¤ (2c/n) * {n(n-1)/2 - (n/2-1)(n/2-2)/2} + Î˜(ğ‘›)
       â‰¤ cn - c(n/4 - 1/2 + 2/n) + Î˜(ğ‘›) â‰¤ cn - 0 (: ì¶©ë¶„íˆ í° cì— ëŒ€í•´ c >= Î˜(ğ‘›)/(n/4 - 1/2 + 2/n))
-> T(n) = O(n)

- í‰ê· 
-> í•œë²ˆ ì”©ì€ ë´ì•¼ í•˜ë¯€ë¡œ T(n) = Î©(n)
-> T(n) = O(n)
- T(n) = Î˜(ğ‘›)

- Worst(=í€µì •ë ¬ Worst: í€µì •ë ¬ Partition í•  ë•Œ í•œ ê°œì”©ë§Œ ë–¨ì–´ì ¸ ë‚˜ê°ˆ ë•Œ)
-> T(n) = T(n-1) + Î˜(ğ‘›)
- T(n) = Î˜(ğ‘›^2)

* ë¶„í•  ë¹„ìœ¨
ex) 1:9ë¡œ ê³„ì† ë¶„í• ë˜ê³  9ê·¸ë£¹ì— ê³„ì† í•´ë‹¹
T(n) = T(9n/10) + Î˜(ğ‘›)
ğ‘‡(ğ‘˜) â‰¤ ğ‘ğ‘˜, âˆ€ğ‘˜ < ğ‘› ë¼ê³  ê°€ì •
ğ‘‡(ğ‘›) =ğ‘‡(9ğ‘›/10) + Î˜(ğ‘›) â‰¤ (9c/10)*n + Î˜(ğ‘›) = cn âˆ’ (1/n)cn + Î˜(n)
ì¶©ë¶„íˆ í° ğ‘ â‰¥ 10*Î˜(ğ‘›) / n ì— ëŒ€í•´ 
ğ‘‡(ğ‘›) â‰¤ cn -> ğ‘‡(ğ‘›) = ğ‘‚(ğ‘›)
ğ‘‡(ğ‘›) = Î©(ğ‘›)
=> ğ‘‡(ğ‘›) = Î˜(ğ‘›)

* ìµœì•…ì—ë„ ì„ í˜• ì‹œê°„ ì„ íƒ ì•Œê³ ë¦¬ì¦˜
1. ì›ì†Œ 5ê°œì¸ ê·¸ë£¹(ë§ˆì§€ë§‰ì€ 5ê°œ ì´í•˜)ìœ¼ë¡œ ë‚˜ëˆˆë‹¤
2. ê° ê·¸ë£¹ì˜ ì¤‘ê°„ ê°’ì„ ì°¾ëŠ”ë‹¤
3. ê° ì¤‘ê°„ ê°’ë“¤ì˜ ì¤‘ê°„ ê°’ Mì„ ì°¾ëŠ”ë‹¤
4. ìµœì•…ì˜ ê²½ìš°ëŠ” O(Më³´ë‹¤ í°ì§€ ì‘ì€ì§€ ëª¨ë¥´ëŠ” ê²ƒ)ë“¤ì´ ëª¨ë‘ í•œìª½ì— ì ë¦¬ëŠ” ê²½ìš°

- ëª¨ë‘ Mì˜ ì™¼ìª½ì— ì ë ¸ë‹¤ë©´
-> Më³´ë‹¤ í° ê²ƒ ê°œìˆ˜ = ìµœì†Œ 3n/10 - 3 ê°œ -> Mí¬í•¨ ìµœì†Œ 3n/10 - 2 ê°œ
-> ë‚˜ë¨¸ì§€ëŠ” n - (3n/10 - 2) = 7n/10 + 2ê°œ
-> ìµœì•…ì˜ ê²½ìš° 7n/10 + 2 : 3n/10 - 2 ìœ¼ë¡œ ë¶„í•   -> n ë¬´ìˆ˜íˆ í¬ë©´ 7:3
- ìµœì•…ì˜ ê²½ìš° ì‹œê°„ ë³µì¡ë„
ğ‘‡(ğ‘›) â‰¤ ğ‘‡([n/5]) + ğ‘‡(7ğ‘›/10 + 2) + Î˜(ğ‘›) 
     â‰¤ ğ‘‡(ğ‘›/5+1) + ğ‘‡(7ğ‘›/10 + 2) + Î˜(ğ‘›) 
 ğ‘‡(ğ‘˜) â‰¤ ğ‘ğ‘˜, (âˆ€ğ‘˜, n/5 â‰¤ ğ‘˜ < ğ‘›) ë¼ê³  ê°€ì •
ğ‘‡(ğ‘›) â‰¤ ğ‘‡(ğ‘›/5+1) + ğ‘‡(7ğ‘›/10 + 2) + Î˜(ğ‘›)
     â‰¤ ğ‘(n/5 + 1 + 7n/10 +2) + Î˜(ğ‘›) = ğ‘(9n/10 + 3) + Î˜(ğ‘›)
 ì¶©ë¶„íˆ í° ğ‘ â‰¥ 10 * Î˜(ğ‘›) / (n-30) ì— ëŒ€í•´ 
ğ‘‡(ğ‘›) â‰¤ ğ‘ğ‘› -> ğ‘‡(ğ‘›) = ğ‘‚(ğ‘›) 
ğ‘‡(ğ‘›) = Î©(ğ‘›)
=>  T(n) = Î˜(ğ‘›) : ië²ˆì§¸ ì›ì†Œ ì°¾ëŠ” ê²ƒ < ì •ë ¬ T(n) = Î˜(nlogn)
"""